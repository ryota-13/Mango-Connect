<h1 class="text-center mt-4 mb-4">プロフィール編集</h1>

<%= form_for(current_user, url: user_path(current_user), html: { method: :patch, enctype: "multipart/form-data" }) do |f| %>

  <%= render 'public/users/errors', object: @user %>

  <div class="container d-flex justify-content-center">
    <div class="col-12 col-md-8">

      <div class="row mb-3">
        <div class="col-12">
          <%= f.label :image, "プロフィール画像", class: 'form-label' %>
          <%= f.file_field :image, class: 'form-control' %>
          
          <% if current_user.image.attached? %>
            <div class="mt-3">
              <p>現在のプロフィール画像:</p>
              <%= image_tag url_for(current_user.image), class: 'img-fluid mb-3' %>
            </div>  
          <% end %>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-12">
          <%= f.label :name, "名前", class: 'form-label' %>
          <%= f.text_field :name, class: 'form-control', placeholder: '20文字以内で入力してください' %>
        </div>
      </div>
      
      <div class="row mb-3">
        <div class="col-12">
          <%= f.label :profile, "自己紹介", class: 'form-label' %>
          <%= f.text_area :profile, class: 'form-control', rows: 3, placeholder: '50文字以内で入力してください' %>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-12">
          <%= f.label :email, "メールアドレス", class: 'form-label' %>
          <%= f.email_field :email, value: current_user.email, class: 'form-control' %>
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-12">
          <%= f.submit '更新する', class: 'btn btn-primary' %>
        </div>
      </div>
    </div>
  </div>
<% end %>

<div class="d-flex justify-content-center mt-3">
  <%= link_to '戻る', mypage_path, class: 'btn btn-secondary mr-2' %>
  <%= link_to '退会する', user_path(current_user), method: :delete, data: { confirm: '本当に退会しますか？' }, class: 'btn btn-danger' %>
</div>
